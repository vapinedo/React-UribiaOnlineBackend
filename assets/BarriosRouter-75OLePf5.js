import{u as g,a as F,b as T,r as B,j as r,B as w,C as k,c as D,R,d as f}from"./index-B8iO6XQY.js";import{u as y,B as G,D as A,G as P,I as V,a as I,b as L}from"./DataGrid-BRn6vVrE.js";import"./index-PO9Yw8A2.js";const O={id:"",nombre:""};function p({isEditMode:e}){var j;const c=g(),{id:s}=F(),{createBarrio:d,updateBarrio:u,getBarrio:t,loading:m,error:i}=y(),b=T({defaultValues:O,mode:"onTouched"}),{register:x,formState:o,handleSubmit:h,reset:n}=b,{errors:C,isSubmitting:v,isValid:S}=o;B.useEffect(()=>{(async()=>{if(e&&s)try{const a=await t(s);a&&n({...a})}catch(a){console.error("Error loading barrio:",a)}})()},[e,s,n,t]);const N=async l=>{const a={...l};e?await u(a):await d(a),c("/barrios")},E=l=>{console.log({errors:l})};return m?r.jsx("div",{children:"Loading..."}):i?r.jsxs("div",{children:["Error: ",i]}):r.jsxs(w,{children:[r.jsx("header",{className:"mb-4 d-flex justify-content-between align-items-center",children:r.jsx("h2",{children:e?"Editar Barrio":"Nuevo Barrio"})}),r.jsxs("form",{onSubmit:h(N,E),noValidate:!0,children:[r.jsx("div",{className:"row",children:r.jsx("div",{className:"col-md-12 mb-3",children:r.jsx(k,{autoFocus:!0,type:"text",name:"nombre",label:"Nombre",register:x("nombre"),error:(j=C.nombre)==null?void 0:j.message})})}),r.jsx(D,{type:"submit",variant:"contained",sx:{marginTop:2},disabled:v||!S,color:e?"success":"primary",children:e?"Actualizar":"Guardar"})]})]})}function z(){const e=g(),{dialogConfirm:c}=L(),{barrios:s,loading:d,error:u,fetchBarrios:t,deleteBarrio:m}=y();B.useEffect(()=>{t()},[t]);const i=o=>r.jsxs(r.Fragment,{children:[r.jsx(V,{color:"#00abfb",cursor:"pointer",onClick:()=>e(`/barrios/editar/${o.id}`)}),r.jsx(I,{color:"#ff2825",cursor:"pointer",style:{marginLeft:15},onClick:()=>b(o)})]}),b=async o=>{const h=`Vas a eliminar el barrio ${o.row.nombre}`,{isConfirmed:n}=await c(h);n&&m(o.row.id)},x=[{field:"nombre",headerName:"Nombre",width:150,editable:!0},{field:"Acciones",renderCell:i}];return r.jsxs(w,{children:[r.jsxs("header",{className:"d-flex justify-content-between align-items-center",children:[r.jsx("h2",{children:"Lista de Barrios"}),r.jsx("button",{onClick:()=>e("/barrios/nuevo"),className:"btn btn-primary",children:"Crear barrio"})]}),r.jsx(G,{sx:{height:"100%",width:"100%",marginTop:3},children:d?r.jsx("p",{children:"Cargando barrios..."}):u?r.jsx("p",{children:"Ocurri√≥ un error al cargar los barrios."}):r.jsx(A,{pagination:!0,rows:s,columns:x,density:"compact",checkboxSelection:!0,disableColumnFilter:!0,disableColumnSelector:!0,disableDensitySelector:!0,disableRowSelectionOnClick:!0,slots:{toolbar:P},pageSizeOptions:[10,25,50,100],slotProps:{toolbar:{showQuickFilter:!0}},sx:{border:"none",overflowX:"hidden","& .css-128fb87-MuiDataGrid-toolbarContainer":{display:"flex",marginTop:"12px",marginBottom:"22px",flexDirection:"row-reverse"}},localeText:{toolbarExport:"Exportar",toolbarQuickFilterPlaceholder:"Buscar..."}})})]})}function q(){return r.jsxs(R,{children:[r.jsx(f,{path:"/",element:r.jsx(z,{})}),r.jsx(f,{path:"/nuevo",element:r.jsx(p,{isEditMode:!1})}),r.jsx(f,{path:"/editar/:id",element:r.jsx(p,{isEditMode:!0})})]})}export{q as default};
